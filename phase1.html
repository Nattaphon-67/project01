<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Phase 1 — คู่มือการทำงาน</title>
    <style>
      body{font-family:sans-serif;line-height:1.6;margin:24px;color:#111}
      h1,h2{color:#1b1b18}
      pre{background:#f6f8fa;padding:12px;border-radius:6px;overflow:auto}
      code{font-family:Menlo,monospace}
      section{margin-bottom:20px}
    </style>
  </head>
  <body>
    <h1>Phase 1 — คู่มือการทำงาน (สรุปโปรเจ็ค)</h1>

    <section>
      <h2>สรุปสั้น ๆ ของโปรเจ็ค</h2>
      <ul>
        <li>โปรเจ็คเป็น Laravel (PHP &gt;= 8.2) ใช้ Laravel 12</li>
        <li>หน้า public หลัก (<code>/</code>) เรียก <code>PublicController@index</code> และโหลดโมเดล <code>Program</code></li>
        <li>view แสดงข้อมูลโปรแกรมจากตาราง <code>programs</code></li>
      </ul>
    </section>

    <section>
      <h2>ไฟล์สำคัญ</h2>
      <ul>
        <li><code>routes/web.php</code></li>
        <li><code>app/Http/Controllers/PublicController.php</code></li>
        <li><code>app/Models/Program.php</code></li>
        <li><code>database/migrations/2025_09_01_072917_create_programs_table.php</code></li>
        <li><code>resources/views/index.blade.php</code></li>
      </ul>
    </section>

    <section>
      <h2>การตั้งค่า (fast start)</h2>
      <ol>
        <li>ติดตั้ง dependency ของ PHP
          <pre><code>composer install</code></pre>
        </li>
        <li>สร้าง .env และคีย์แอป
          <pre><code>cp .env.example .env
php artisan key:generate</code></pre>
        </li>
        <li>สร้างไฟล์ฐานข้อมูล sqlite (ถ้ายังไม่มี)
          <pre><code>touch database/database.sqlite</code></pre>
        </li>
        <li>รัน migration และ seeder
          <pre><code>php artisan migrate --force
php artisan db:seed --class=ProgramSeeder</code></pre>
        </li>
        <li>ติดตั้ง assets และรัน Vite (ถ้าต้องการ)
          <pre><code>npm install
npm run dev</code></pre>
        </li>
        <li>รันแอป
          <pre><code>php artisan serve
# เปิด http://127.0.0.1:8000</code></pre>
        </li>
      </ol>
    </section>

    <section>
      <h2>ปัญหาที่อาจเจอ และวิธีแก้</h2>
      <p>ถ้าหน้าแสดง error เพราะไม่มีข้อมูล <code>Program</code> ให้เพิ่มผ่าน tinker หรือ seeder:</p>
      <pre><code>php artisan tinker
>>> App\Models\Program::create([ 'program_name_th' => 'ตัวอย่าง', 'program_name_en' => 'Example', 'degree_th' => 'ปริญญาตรี', 'degree_en' => 'B.Sc.', 'credits_required' => 120 ])
      </code></pre>
      <p>หรือแก้ controller ให้ปลอดภัยเมื่อไม่มีข้อมูล:</p>
      <pre><code>public function index()
{
  $program = Program::first();
  if (! $program) return view('index')->with('program', new Program());
  return view('index', compact('program'));
}
      </code></pre>
    </section>

    <section>
      <h2>Next steps</h2>
      <ol>
        <li>เพิ่มการตรวจสอบ null ก่อนเข้าถึง `$program` ใน view</li>
        <li>เพิ่มหน้า CRUD สำหรับ `Program`</li>
        <li>เพิ่ม README สำหรับ deploy</li>
      </ol>
    </section>

    <footer>
      <p>สร้างโดยอัตโนมัติ — หากต้องการขยายเป็นคู่มือ developer/ops แจ้ง scope เพิ่มเติม</p>
    </footer>
  </body>
</html>
